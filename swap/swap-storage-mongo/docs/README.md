
## MongoSwapStorage

**Kind**: global class  

* [MongoSwapStorage](#MongoSwapStorage)
  * [new MongoSwapStorage(options)](#new_MongoSwapStorage_new)
  * [read(traceId)](#MongoSwapStorage+read) ⇒ `object`
  * [create(traceId, attributes)](#MongoSwapStorage+create) ⇒ `Promise.&lt;object&gt;`
  * [finalize(traceId, payload)](#MongoSwapStorage+finalize) ⇒ `Promise.&lt;object&gt;`
  * [update(traceId, updates)](#MongoSwapStorage+update) ⇒ `Promise.&lt;object&gt;`
  * [delete(traceId)](#MongoSwapStorage+delete) ⇒
  * [exist(traceId)](#MongoSwapStorage+exist) ⇒ `Boolean`
  * [listByStatus(status)](#MongoSwapStorage+listByStatus) ⇒ `Promise.&lt;Array&gt;`
  * [listByOfferAddress(address, \[status\])](#MongoSwapStorage+listByOfferAddress) ⇒ `Promise.&lt;Array&gt;`
  * [listByDemandAddress(address, \[status\])](#MongoSwapStorage+listByDemandAddress) ⇒ `Promise.&lt;Array&gt;`

### new MongoSwapStorage(options)

Creates an instance of MongoSwapStorage.

| Param                | Type     | Default                                   | Description                                |
| -------------------- | -------- | ----------------------------------------- | ------------------------------------------ |
| options              | `Object` |                                           | { collection, url }                        |
| options.url          | `string` |                                           | mongodb connection string                  |
| [options.collection] | `string` | `&quot;&#x27;abt_forge_swaps&#x27;&quot;` | which collection to store the swap records |

### mongoSwapStorage.read(traceId) ⇒ `object`

Get an atomic-swap order by traceId

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  
**Returns**: `object` - the atomic-swap-order  

| Param   | Type     | Description                |
| ------- | -------- | -------------------------- |
| traceId | `string` | the uuid of the swap order |

### mongoSwapStorage.create(traceId, attributes) ⇒ `Promise.&lt;object&gt;`

Create new atomic-swap order, traceId should be generated by user

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  

| Param      | Type     |
| ---------- | -------- |
| traceId    | `string` |
| attributes | `object` |

### mongoSwapStorage.finalize(traceId, payload) ⇒ `Promise.&lt;object&gt;`

Finalize the payload of atomic-swap

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |
| payload | `object` |

### mongoSwapStorage.update(traceId, updates) ⇒ `Promise.&lt;object&gt;`

Update the status of an atomic-swap order, will not allow payload fields to be updated

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |
| updates | `object` |

### mongoSwapStorage.delete(traceId) ⇒

Delete atomic swap order by traceId

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  
**Returns**: void  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |

### mongoSwapStorage.exist(traceId) ⇒ `Boolean`

Check if atomic swap record exists

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |

### mongoSwapStorage.listByStatus(status) ⇒ `Promise.&lt;Array&gt;`

Find atomic swap records by status

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  
**Returns**: `Promise.&lt;Array&gt;` - TODO: add pagination for this  

| Param  | Type     | Description                             |
| ------ | -------- | --------------------------------------- |
| status | `string` | check out list of supported status here |

### mongoSwapStorage.listByOfferAddress(address, [status]) ⇒ `Promise.&lt;Array&gt;`

Find atomic swap records by offer address and status

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  
**Returns**: `Promise.&lt;Array&gt;` - TODO: add pagination for this  

| Param    | Type     | Default                    |
| -------- | -------- | -------------------------- |
| address  | `string` |                            |
| [status] | `string` | `&quot;&#x27;&#x27;&quot;` |

### mongoSwapStorage.listByDemandAddress(address, [status]) ⇒ `Promise.&lt;Array&gt;`

Find atomic swap records by demand address and status

**Kind**: instance method of [`MongoSwapStorage`](#MongoSwapStorage)  
**Returns**: `Promise.&lt;Array&gt;` - TODO: add pagination for this  

| Param    | Type     | Default                    |
| -------- | -------- | -------------------------- |
| address  | `string` |                            |
| [status] | `string` | `&quot;&#x27;&#x27;&quot;` |


## Contributors

| Name           | Website                    |
| -------------- | -------------------------- |
| **wangshijun** | <https://ocap.arcblock.io> |
