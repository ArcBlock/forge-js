---
title: '@arcblock/swap-storage-nedb'
description: 'Storage engine that uses mongodb for atomic swap'
keywords: 'forge, sdk, javascript'
author: 'wangshijun'
category: 'packages'
layout: 'documentation'
tags:
  - 'forge'
---


## DiskSwapStorage

**Kind**: global class  

* [DiskSwapStorage](#DiskSwapStorage)
  * [new DiskSwapStorage(options)](#new_DiskSwapStorage_new)
  * [create(traceId, initialAttributes)](#DiskSwapStorage+create) ⇒ `Promise.<object>`
  * [read(traceId)](#DiskSwapStorage+read) ⇒ `Promise.<object>`
  * [finalize(traceId, payload)](#DiskSwapStorage+finalize) ⇒ `Promise.<object>`
  * [update(traceId, updates)](#DiskSwapStorage+update) ⇒ `Promise.<object>`
  * [delete(traceId)](#DiskSwapStorage+delete) ⇒
  * [listByStatus(status)](#DiskSwapStorage+listByStatus) ⇒ `Promise.<Array>`
  * [listByOfferAddress(address, \[status\])](#DiskSwapStorage+listByOfferAddress) ⇒ `Promise.<Array>`
  * [listByDemandAddress(address, \[status\])](#DiskSwapStorage+listByDemandAddress) ⇒ `Promise.<Array>`

### new DiskSwapStorage(options)

Creates an instance of DiskSwapStorage.

| Param          | Type     | Description                         |
| -------------- | -------- | ----------------------------------- |
| options        | `Object` | { dbPath }                          |
| options.dbPath | `string` | where to store the database on disk |

### diskSwapStorage.create(traceId, initialAttributes) ⇒ `Promise.<object>`

Create new atomic-swap order, traceId should be generated by user

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  

| Param             | Type     |
| ----------------- | -------- |
| traceId           | `string` |
| initialAttributes | `object` |

### diskSwapStorage.read(traceId) ⇒ `Promise.<object>`

Get an atomic-swap order by traceId

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  
**Returns**: `Promise.<object>` - the atomic-swap-order  

| Param   | Type     | Description                |
| ------- | -------- | -------------------------- |
| traceId | `string` | the uuid of the swap order |

### diskSwapStorage.finalize(traceId, payload) ⇒ `Promise.<object>`

Finalize the payload of atomic-swap

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |
| payload | `object` |

### diskSwapStorage.update(traceId, updates) ⇒ `Promise.<object>`

Update the status of an atomic-swap order, will not allow payload fields to be updated

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |
| updates | `object` |

### diskSwapStorage.delete(traceId) ⇒

Delete atomic swap order by traceId

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  
**Returns**: void  

| Param   | Type     |
| ------- | -------- |
| traceId | `string` |

### diskSwapStorage.listByStatus(status) ⇒ `Promise.<Array>`

Find atomic swap records by status

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  

| Param  | Type     | Description                             |
| ------ | -------- | --------------------------------------- |
| status | `string` | check out list of supported status here |

### diskSwapStorage.listByOfferAddress(address, [status]) ⇒ `Promise.<Array>`

Find atomic swap records by offer address and status

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  

| Param    | Type     | Default                    |
| -------- | -------- | -------------------------- |
| address  | `string` |                            |
| [status] | `string` | `&quot;&#x27;&#x27;&quot;` |

### diskSwapStorage.listByDemandAddress(address, [status]) ⇒ `Promise.<Array>`

Find atomic swap records by demand address and status

**Kind**: instance method of [`DiskSwapStorage`](#DiskSwapStorage)  

| Param    | Type     | Default                    |
| -------- | -------- | -------------------------- |
| address  | `string` |                            |
| [status] | `string` | `&quot;&#x27;&#x27;&quot;` |


## Contributors

| Name           | Website                    |
| -------------- | -------------------------- |
| **wangshijun** | <https://ocap.arcblock.io> |

  